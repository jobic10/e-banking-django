{% extends 'account/main.html' %}
{% load static %}
{% block content %}



<div class="main-panel">
  <div class="content-wrapper">
    <div class="page-header">
      <h3 class="page-title"> {{ customer }} </h3>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Customer</a></li>
          <li class="breadcrumb-item active" aria-current="page">View</li>
        </ol>
      </nav>
    </div>
    <div class="row">
      <div class="col-6 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title text-center">Personal Detail</h4>
            <div class='text-center m-3'>
              <img class='img-fluid img-lg rounded-circle' src="{{ customer.user.profile_pic.url }}" alt="">
            </div>
            <div class="table-responsive">
              <table class="table table-striped table-bordered">

                <tr>
                  <th>Full Name </th>
                  <td>{{ customer }}</td>
                </tr>
                <tr>
                  <th>Email </th>
                  <td>{{ customer.user.email }}</td>
                </tr>
                <tr>
                  <th>Phone </th>
                  <td>{{ customer.phone }}</td>
                </tr>
                <tr>
                  <th>Date of Birth </th>
                  <td>{{ customer.date_of_birth }}</td>
                </tr>
                <tr>
                  <th>Gender </th>
                  <td>{{ customer.user.gender }}</td>
                </tr>
                <tr>
                  <th>Address </th>
                  <td>{{ customer.user.address }}</td>
                </tr>
                <tr>
                  <th>Member Since </th>
                  <td>{{ customer.user.date_joined|timesince }} ago</td>
                </tr>
                <tr>
                  <th>Last Profile Updated </th>
                  <td>{{ customer.user.updated_at|timesince }} ago</td>
                </tr>


              </table>

            </div>
          </div>
        </div>
      </div>
      <div class="col-6 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Account Details</h4>
            <div class="table-responsive">
              <table class="table table-striped table-bordered">


                <tr>
                  <th>Account Number </th>
                  <td>{{ customer.account_number }}</td>
                </tr>
                <tr>
                  <th>Account Type </th>
                  <td>{{ customer.account_type }}</td>
                </tr>
                <tr>
                  <th>Balance </th>
                  <td>&#8358; {{ customer.balance }}</td>
                </tr>


              </table>

            </div>
            <hr>
            <h4 class="card-title">Last five (5) transactions</h4>
            <div class="table-responsive">
              <table class="table table-striped table-bordered">


                <tr>
                  <th>ID</th>
                  <th>Type</th>
                  <th>Amount</th>
                  <th>Description</th>
                  <th>Date</th>
                </tr>
                {% for transaction in transactions %}
                <tr>
                  <td>{{ forloop.counter }}</td>
                  <td>{% if transaction.category == 'D' %}Debit {% else %}Credit {% endif %}</td>
                  <td>{{ transaction.amount }}</td>
                  <td>{{ transaction.description }}</td>
                  <td>{{ transaction.updated_at }}</td>
                </tr>
                {% endfor %}
              </table>

            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}